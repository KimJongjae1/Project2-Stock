# MySQL 내부 엔진 구조

MySQL은 크게 **SQL 레이어(Server Layer)** 와 **스토리지 엔진 레이어(Storage Engine Layer)** 로 나눌 수 있습니다.

---

## 1. SQL 레이어 (Server Layer)

SQL 레이어는 **스토리지 엔진과 독립적**이며, 주로 쿼리 처리와 실행 계획 수립을 담당합니다.

- **커넥션 핸들러**
  - 클라이언트 연결 관리, 인증, 권한 확인

- **쿼리 파서 (Parser)**
  - SQL 문법 검사
  - 내부 트리 구조(AST, Abstract Syntax Tree)로 변환

- **쿼리 옵티마이저 (Optimizer)**
  - 실행 계획 수립 (인덱스 사용 여부, 조인 순서 등)
  - 비용 기반 최적화(Cost-Based Optimization)

- **쿼리 실행기 (Executor)**
  - 옵티마이저가 만든 실행 계획을 수행
  - 스토리지 엔진에 레코드 읽기/쓰기 요청

➡️ **SQL 레이어 = SQL 처리 및 실행 계획 담당**

---

## 2. 스토리지 엔진 레이어 (Storage Engine Layer)

스토리지 엔진 레이어는 실제 데이터를 디스크/메모리에서 읽고 쓰는 역할을 합니다.  
MySQL은 **플러그인 아키텍처**로 다양한 엔진을 선택할 수 있습니다.

- **InnoDB (기본 엔진)**
  - 트랜잭션 지원 (ACID)
  - MVCC (Multi-Version Concurrency Control)
  - 클러스터형 인덱스 (프라이머리 키 기반)
  - Foreign Key 지원

- **MyISAM (이전 기본 엔진)**
  - 빠른 읽기, 단순 구조
  - 트랜잭션/외래키 미지원
  - 테이블 단위 잠금 (Table Lock)

- **Memory (Heap 엔진)**
  - 모든 데이터를 메모리에 저장
  - 매우 빠름
  - 서버 재시작 시 데이터 소실

➡️ **스토리지 엔진 = 실제 데이터 읽기/쓰기 담당**

---

## 3. 기타 컴포넌트

- **플러그인 아키텍처**
  - 인증 플러그인, 로그 플러그인 등 확장 가능

- **버퍼 풀 / 캐시**
  - InnoDB Buffer Pool
  - Query Cache (8.0에서 제거됨)

- **리플리케이션 / 그룹 리플리케이션 엔진**

